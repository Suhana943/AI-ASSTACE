<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Assistant Bot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    @layer properties {
      @property --elh { syntax: '<number>'; inherits: true; initial-value: 1; }
      @property --erx { syntax: '<percentage>'; inherits: true; initial-value: 0%; }
      @property --fx { syntax: '<percentage>'; inherits: true; initial-value: 0%; }
      @property --ealw { syntax: '<number>'; inherits: true; initial-value: 1; }
      @property --earw { syntax: '<number>'; inherits: true; initial-value: 1; }
      @property --erh { syntax: '<number>'; inherits: true; initial-value: 1; }
      @property --mh { syntax: '<number>'; inherits: true; initial-value: 1; }
      @property --mw { syntax: '<number>'; inherits: true; initial-value: 1; }
    }

    :root {
      --surface: #1a1a2e;
      --c: white;
      --c2: #00f0ff;
      --c3: #ff00d4;
    }

    body {
      margin: 0;
      padding: 2rem;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 2rem;
    }

    .rainbow {
      background: linear-gradient(to right, #00e6d8, #c15bff, #ff00a6, #ff2c1c, #ffb800);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .ai-bot {
      scale: 4.2;
      width: 34px;
      aspect-ratio: 1;
      margin-bottom: 2rem;
      position: relative;
      display: grid;
      place-items: center;
      animation: blink 2.4s ease infinite, move-head 4.2s infinite, mouth 1.2s ease-in infinite;
      filter: drop-shadow(0 0 10px var(--c2));
    }

    .head {
      background: linear-gradient(var(--c) 80%, color-mix(in srgb, var(--c), black 30%), var(--c));
      border-radius: .375rem;
      position: absolute;
      width: 28px;
      height: 20px;
    }

    .head::before, .head::after {
      content: '';
      position: absolute;
      top: 6px;
      width: 2px;
      height: 8px;
      background: var(--c);
      border-radius: 2px;
    }

    .head::before { left: -4px; scale: var(--ealw, 1) 1; }
    .head::after  { right: -4px; scale: var(--earw, 1) 1; }

    .face {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: absolute;
      inset: 0 3px;
      background: var(--surface);
      translate: var(--fx) 0;
      border-radius: 4px;
      padding: 4px 4px 2px;
      gap: 3px;
    }

    .face::before {
      content: '';
      background: var(--c);
      position: absolute;
      height: 1px;
      width: 10px;
      top: -2px;
      border-radius: 2px 2px 0 0;
      mask: radial-gradient(circle at 50% 100%, transparent 45%, black 45%);
    }

    .eyes {
      display: flex;
      height: 8px;
      gap: 6px;
    }

    .eyes::before, .eyes::after {
      content: '';
      width: 5px;
      height: 8px;
      scale: 1 var(--elh);
      background: repeating-linear-gradient(to bottom, var(--c), var(--c) .25px, transparent .25px, transparent .6px), linear-gradient(to bottom, var(--c3), transparent 60%), var(--c2);
      border-radius: 1px;
      translate: var(--erx) 0;
      filter: drop-shadow(0 0 2px var(--c2));
    }

    .eyes::after {
      scale: 1 var(--erh);
    }

    .mouth {
      width: 10px;
      height: 2px;
      background: var(--c2);
      border-radius: 0 0 1px 1px;
      filter: drop-shadow(0 0 2px var(--c2));
      scale: var(--mw, 1) var(--mh, 1);
    }

    @keyframes blink {
      from,10%,to { --elh: 1; --erh: 1; }
      2% { --elh: .2; }
      8% { --erh: .1; }
    }

    @keyframes mouth {
      from,30%,70%,to { --mh: 1; --mw: 1; }
      20% { --mh: .5; }
      60% { --mw: .7; }
    }

    @keyframes move-head {
      from,20%,40%,to { --erx: 0%; --fx: 0%; --ealw: 1; --earw: 1; }
      10% { --erx: 20%; --fx: 10%; --ealw: 1.5; --earw: .5; }
      30% { --erx: -20%; --fx: -10%; --ealw: .5; --earw: 1.5; }
    }

    .chatbox {
      width: 100%;
      max-width: 500px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      padding: 1rem;
      box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
    }

    .messages {
      height: 200px;
      overflow-y: auto;
      background: #0f1624;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .messages div {
      margin-bottom: 0.5rem;
    }

    .input-area {
      display: flex;
      gap: 0.5rem;
    }

    input {
      flex-grow: 1;
      padding: 0.5rem;
      border-radius: 5px;
      border: none;
    }

    button {
      background: linear-gradient(45deg, #00f0ff, #ff00d4);
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px #00f0ff;
    }
  </style>
</head>
<body>

  <h1><span class="rainbow">AI Assistant</span></h1>

  <div class="ai-bot">
    <div class="head">
      <div class="face">
        <div class="eyes"></div>
        <div class="mouth"></div>
      </div>
    </div>
  </div>

  <div class="chatbox">
    <div class="messages" id="messages"></div>
    <div class="input-area">
      <input id="userInput" type="text" placeholder="Ask something..." />
      <button onclick="sendMessage()">Send</button>
      <button onclick="startListening()">🎤</button>
    </div>
  </div>

  <script>
    const synth = window.speechSynthesis;

    function speak(text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.pitch = 1.2;
      utter.rate = 1;
      synth.speak(utter);
      animateBotTalking();
    }

    function animateBotTalking() {
      const bot = document.querySelector('.ai-bot');
      bot.style.setProperty('--mh', 1.5);
      bot.style.setProperty('--mw', 1.5);
      setTimeout(() => {
        bot.style.setProperty('--mh', 1);
        bot.style.setProperty('--mw', 1);
      }, 800);
    }

    async function respondToUser(input) {
      addMessage("🤖: Thinking...");
      try {
        const res = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "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" // 🔐 Replace with your key
          },
          body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [
              { role: "system", content: "You are a helpful and fun assistant." },
              { role: "user", content: input }
            ]
          })
        });
        const data = await res.json();
        const reply = data.choices[0].message.content;
        updateLastMessage("🤖: " + reply);
        speak(reply);
      } catch (err) {
        updateLastMessage("🤖: Sorry, something went wrong.");
        console.error(err);
      }
    }

    function addMessage(message) {
      const box = document.getElementById("messages");
      const div = document.createElement("div");
      div.textContent = message;
      box.appendChild(div);
      box.scrollTop = box.scrollHeight;
    }

    function updateLastMessage(text) {
      const box = document.getElementById("messages");
      const last = box.lastElementChild;
      if (last) last.textContent = text;
    }

    function sendMessage() {
      const input = document.getElementById("userInput");
      const text = input.value.trim();
      if (!text) return;
      addMessage("🧑: " + text);
      respondToUser(text);
      input.value = "";
    }

    function startListening() {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      const recognition = new SpeechRecognition();
      recognition.lang = 'en-US';
      recognition.start();
      recognition.onresult = function (event) {
        const userText = event.results[0][0].transcript;
        addMessage("🧑: " + userText);
        respondToUser(userText);
      };
    }

    window.onload = () => {
      const welcome = "Hello! I am your AI assistant. Ask me anything!";
      addMessage("🤖: " + welcome);
      speak(welcome);
    };
  </script>
</body>
</html>
